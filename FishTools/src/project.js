window.__require=function t(e,s,i){function r(c,o){if(!s[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!o&&h)return h(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+c+"'")}}var u=s[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,s,i)}return s[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<i.length;c++)r(i[c]);return r}({BYFrameApp:[function(t,e,s){"use strict";cc._RF.push(e,"3d130IsoeJGQrRsTq6U4/dz","BYFrameApp");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};cc.Class({extends:cc.Component,properties:{},onLoad:function(){(function(){bycc.log=function(t){"object"==(void 0===t?"undefined":i(t))?console.log(JSON.stringify(t)):console.log(t)},bycc.visibleSize=cc.view.getVisibleSize(),bycc.visibleSize=cc.size(1134,750),bycc.screenCenter=cc.v2(bycc.visibleSize.width/2,bycc.visibleSize.height/2);var e=t("UIMsgMgr");bycc.uiMsgMgr=new e,t("Resource"),t("FishUtils"),t("UtilScript")})()},start:function(){}}),cc._RF.pop()},{FishUtils:"FishUtils",Resource:"Resource",UIMsgMgr:"UIMsgMgr",UtilScript:"UtilScript"}],FishItem:[function(t,e,s){"use strict";cc._RF.push(e,"9006bb3QUBMZ5DuUWmgq16n","FishItem"),cc.Class({extends:cc.Component,properties:{itemToggle:cc.Toggle,itemSprit:cc.Sprite,itemLabel:cc.Label},onLoad:function(){this.itemToggle.node.on("toggle",this.checkedCallback,this)},start:function(){},onDestroy:function(){this.itemToggle.node&&this.itemToggle.node.off("toggle",this.checkedCallback,this),this.unRegisteGameHandler()},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={CLEAR_TOGGLE:"clear_toggle"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){var i=t;switch(e){case i.CMD_UI.CLEAR_TOGGLE:i.processUncheck()}},processUncheck:function(){this.itemToggle.uncheck()},initUI:function(t){this.dataInfo=t;var e=this.dataInfo.FISH_NAME,s=this.dataInfo.FISH_RES,i=BYResource.FishSpriteMap[s];this.itemLabel.string=e,this.itemSprit.spriteFrame=i,this.initCMD("FishItem "+t.KindID)},checkedCallback:function(t){t.isChecked&&bycc.uiMsgMgr.dispatchMsg("generate_fish",this.dataInfo)}}),cc._RF.pop()},{}],FishListScript:[function(t,e,s){"use strict";cc._RF.push(e,"e61df0fYslCTaryhqDGOovV","FishListScript"),cc.Class({extends:cc.Component,properties:{fishItem:cc.Prefab,contentView:cc.Node},onLoad:function(){this.fishList={}},start:function(){this.initCMD()},onDestroy:function(){this.unRegisteGameHandler()},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={RES_READY:"res_ready"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){var i=t;switch(e){case i.CMD_UI.RES_READY:i.refreshUI()}},refreshUI:function(t){for(var e in this.fishList[1101]||(this.fishList=BYResource.ConfigMaps.fish.config),this.fishList)if(this.fishList.hasOwnProperty(e)){var s=this.fishList[e];s.KindID=e,this.addOneItem(s)}},addOneItem:function(t){var e=cc.instantiate(this.fishItem);e.getComponent("FishItem").initUI(t),e.parent=this.contentView}}),cc._RF.pop()},{}],FishMenuScript:[function(t,e,s){"use strict";cc._RF.push(e,"b6adbTf+gpObr6RobE9lKmM","FishMenuScript"),cc.Class({extends:cc.Component,properties:{playBtn:{default:null,type:cc.Button},playBtnLabel:cc.Label,exportBtn:cc.Button},onLoad:function(){},start:function(){},onDestroy:function(){},widgetClickCallback:function(t,e){switch(t.target.name){case"PlayButton":BYResource.PAUSED=!BYResource.PAUSED,BYResource.PAUSED?this.playBtnLabel.string="Play":this.playBtnLabel.string="Pause",bycc.uiMsgMgr.dispatchMsg("clear_toggle");break;case"ExportButton":this.exportTracksData()}},exportTracksData:function(){if(0==BYResource.FISHSPOOLSIZE){var t=[];for(var e in BYResource.TRACKFISHTNOTE)if(BYResource.TRACKFISHTNOTE.hasOwnProperty(e)){var s=BYResource.TRACKFISHTNOTE[e];t.push(e+"|"+(s.startT-BYResource.FISHSTARTNOTE).toFixed(0)+"|"+(s.endT-BYResource.FISHSTARTNOTE).toFixed(0)+"|"+s.pathId)}if(t.length){BYResource.TRACKSDATA[BYResource.TRACKSGROUP]=t;var i=JSON.stringify(BYResource.TRACKSDATA);bycc.downloadPathConfigs(i,"tracksData")}else alert("no message")}else alert("Please wait for a while")}}),cc._RF.pop()},{}],FishPoolScene:[function(t,e,s){"use strict";cc._RF.push(e,"02ee0asn7tBTZWicN27zwl1","FishPoolScene"),cc.Class({extends:cc.Component,properties:{fishPrefab:cc.Prefab},onLoad:function(){this._pool=new cc.NodePool("fishSpript")},start:function(){this.initCMD(),BYResource.TRACKSGROUP="Group-"+this.formatDateTime(cc.sys.now()),bycc.log(" \u5f53\u524dGroupName \uff1a "+BYResource.TRACKSGROUP)},onDestroy:function(){this.unRegisteGameHandler()},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={GENERATE_FISH:"generate_fish",CLEAR_FISH:"clear_fish"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){var i=t;switch(e){case i.CMD_UI.GENERATE_FISH:this.generateFishNode(s);break;case i.CMD_UI.CLEAR_FISH:this.removeFishNode(s)}},generateFishNode:function(t){var e=this._pool.get();e||(e=cc.instantiate(this.fishPrefab)),e.getComponent("fishSpript").initFish(t),e.parent=this.node,BYResource.FISHSPOOLSIZE+=1,BYResource.SCENESTARTNOTE||(BYResource.SCENESTARTNOTE=.001*cc.sys.now(),bycc.log(" \u8bb0\u5f55\u573a\u666f\u5f00\u59cb\u65f6\u95f4 "+BYResource.SCENESTARTNOTE))},removeFishNode:function(t){this._pool.put(t),BYResource.FISHSPOOLSIZE-=1},formatDateTime:function(t){var e=new Date;e.setTime(t);var s=e.getFullYear(),i=e.getMonth()+1;i=i<10?"0"+i:i;var r=e.getDate();r=r<10?"0"+r:r;var n=e.getHours();n=n<10?"0"+n:n;var c=e.getMinutes(),o=e.getSeconds();return""+s+i+r+n+(c=c<10?"0"+c:c)+(o=o<10?"0"+o:o)}}),cc._RF.pop()},{}],FishPrepareScript:[function(t,e,s){"use strict";cc._RF.push(e,"362fexU/1JOObMCPZLZaPpO","FishPrepareScript"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.offSetVector=cc.v2(99,55)},start:function(){this.startLoadingRes_Configs()},startLoadingRes_Configs:function(){var t=this;cc.loader.loadResDir(BYResource.ConfigPath,function(e,s,i){if(e)bycc.log(" \u52a0\u8f7d\u8d44\u6e90\u51fa\u9519 \u9519\u8bef\u8d44\u6e90\uff1a"+BYResource.ConfigPath);else{for(var r=0;r<s.length;r++){var n=s[r];n instanceof cc.JsonAsset&&(BYResource.ConfigMaps[n.name]=n.json),n.name==BYResource.FishPathsConfigName&&t.loadPathContentCallback(n.text)}t.startLoadingFishRes()}})},loadPathContentCallback:function(t){for(var e=t.replace(/\r/g,"").split("\n").filter(function(t){return!!t}),s=0,i=e.length;s<i;s++){var r=e[s].split("|"),n=parseInt(r[0])+") "+r[1];if(BYResource.PathsListTitles[parseInt(r[0])]=n,r.length>=5){var c={};c.pathId=parseInt(r[0]),c.points=fish.pathUtils.str2Vec2Array(r[2]),c.ctrls=fish.pathUtils.str2Vec4Array(r[3]),c.speeds=fish.pathUtils.str2FloatArray(r[4]),BYResource.FishPaths[c.pathId.toString()]=c}}this.cacheAllPathDetailInfo()},cacheAllPathDetailInfo:function(){for(var t in BYResource.FishPaths)BYResource.FishPaths.hasOwnProperty(t)&&(BYResource.FishPathsInfo[t]=this.setFishPath(t))},setFishPath:function(t){var e=t,s={},i=[],r=[],n=[],c=BYResource.FishPaths[t];if(void 0==c||null==c)return!1;t=c.points;var o=c.ctrls;c=c.speeds;var a=[];for(var h in t)if(t.hasOwnProperty(h)){var u=t[h];u.x+=this.offSetVector.x,u.y+=this.offSetVector.y,a.push(cc.v2(u.x,u.y))}BYResource.PathsMainSpot[e]=a;var l=[];for(var p in o)if(o.hasOwnProperty(p)){var f=o[p];f.x+=this.offSetVector.x,f.y+=this.offSetVector.y,f.z+=this.offSetVector.x,f.w+=this.offSetVector.y,l.push(cc.v2(f.x,f.y)),l.push(cc.v2(f.z,f.w))}l.shift(),l.pop(),BYResource.PathsCtrSpot[e]=l,i.push(t[0]),r.push(0);for(var d=0,g=0,C=t.length-1;g<C;g++){for(var y=cc.v2(o[g].z,o[g].w),v=cc.v2(o[g+1].x,o[g+1].y),P=(y=fish.pathUtilsInternal.getCubicBezierVertices(t[g],y,v,t[g+1],10),v=1,y.length);v<P;v++)i.push(y[v]);v=c[g],P=0;for(var R=y.length-1;P<R;P++){var _=fish.pathUtils.v2p(y[P]),I=fish.pathUtils.v2p(y[P+1]);d=d+bycc.pDistance(_,I)/v;r.push(d),_=bycc.pSub(I,_),_=fish.pathUtils.getAngle(_,cc.v2(-1,0)),n.push(_)}}return n.push(n[n.length-1]),s.path=i,s.times=r,s.angles=n,s},startLoadingFishRes:function(){var t=this;cc.loader.loadResDir(BYResource.FishResPath,function(e,s,i){if(e)bycc.log(" \u52a0\u8f7d\u8d44\u6e90\u51fa\u9519 \u9519\u8bef\u8d44\u6e90\uff1a"+BYResource.FishResPath);else{for(var r=0;r<s.length;r++){var n=s[r];n instanceof cc.SpriteFrame&&(BYResource.FishSpriteMap[n.name]=n)}t.cacheAllFishAnimClips()}})},cacheAllFishAnimClips:function(){for(var t=BYResource.ConfigMaps[BYResource.FishAnimConfigName],e=0;e<t.length;e++){for(var s=t[e],i=[],r=0;r<s.spriteFrame.length;r++){var n=s.spriteFrame[r];i.push(BYResource.FishSpriteMap[n])}var c=cc.AnimationClip.createWithSpriteFrames(i,i.length);c.name=s.name,c.wrapMode=cc.WrapMode.Loop,c.speed=(1/(i.length*s.delay)).toFixed(2),BYResource.FishAnimClip[s.name]=c}bycc.uiMsgMgr.dispatchMsg("res_ready")}}),cc._RF.pop()},{}],FishUtils:[function(t,e,s){"use strict";cc._RF.push(e,"8a5d4lar0hLF56pUj1ZNrBs","FishUtils"),bycc.PI=Math.PI,bycc.FLT_MAX=parseFloat("3.402823466e+38F"),bycc.FLT_MIN=parseFloat("1.175494351e-38F"),bycc.RAD=bycc.PI/180,bycc.DEG=180/bycc.PI,bycc.pAdd=function(t,e){return cc.v2(t.x+e.x,t.y+e.y)},bycc.pSub=function(t,e){return cc.v2(t.x-e.x,t.y-e.y)},bycc.pIn=function(t,e){t.x=e.x,t.y=e.y},bycc.pClamp=function(t,e,s){return cc.v2(bycc.clampf(t.x,e.x,s.x),bycc.clampf(t.y,e.y,s.y))},bycc.clampf=function(t,e,s){if(e>s){var i=e;e=s,s=i}return t<e?e:t<s?t:s},bycc.pDot=function(t,e){return t.x*e.x+t.y*e.y},bycc.pLengthSQ=function(t){return bycc.pDot(t,t)},bycc.pLength=function(t){return Math.sqrt(bycc.pLengthSQ(t))},bycc.pDistance=function(t,e){return bycc.pLength(bycc.pSub(t,e))},bycc.pMult=function(t,e){return cc.v2(t.x*e,t.y*e)},bycc.pLerp=function(t,e,s){return bycc.pAdd(bycc.pMult(t,1-s),bycc.pMult(e,s))},bycc.visibleSize=cc.view.getVisibleSize(),fish.DESIGN_WIDTH=1136,fish.DESIGN_HEIGHT=640,fish.PathUtils=cc.Class({ctor:function(){},str2Vec2:function(t){return t=t.split(","),{x:parseFloat(t[0])||0,y:parseFloat(t[1])||0}},str2Vec4:function(t){return t=t.split(","),{x:parseFloat(t[0])||0,y:parseFloat(t[1])||0,z:parseFloat(t[2])||0,w:parseFloat(t[3])||0}},str2Rect:function(t){return t=t.split(","),{x:parseFloat(t[0])||0,y:parseFloat(t[1])||0,width:parseFloat(t[2])||0,height:parseFloat(t[3])||0}},str2Vec2Array:function(t){for(var e=[],s=0,i=(t=t.split(";")).length;s<i;s++)t[s]&&e.push(this.str2Vec2(t[s]));return e},str2Vec4Array:function(t){for(var e=[],s=0,i=(t=t.split(";")).length;s<i;s++)t[s]&&e.push(this.str2Vec4(t[s]));return e},str2FloatArray:function(t){for(var e=[],s=0,i=(t=t.split(";")).length;s<i;s++)t[s]&&e.push(parseFloat(t[s])||0);return e},v2p:function(t){return cc.v2(t)},p2v:function(t){return cc.v2(t)},getAngle:function(t,e){return Math.atan2(t.x*e.y-t.y*e.x,t.x*e.x+t.y*e.y)*bycc.DEG}}),fish.PathUtilsInternal=cc.Class({ctor:function(){this.winWidth=bycc.visibleSize.width,this.winHeight=bycc.visibleSize.height,this.minPos=cc.v2(.001,.001),this.maxPos=cc.v2(bycc.visibleSize.width-.001,bycc.visibleSize.height-.001),this.cornerPos=[cc.v2(0,0),cc.v2(bycc.visibleSize.width,0),cc.v2(bycc.visibleSize.width,bycc.visibleSize.height),cc.v2(0,bycc.visibleSize.height)],this.sins={},this.coss={};for(var t=0;360>t;t++){var e=t*bycc.RAD,s=Math.sin(e);e=Math.cos(e);this.sins[t]=s,this.coss[t]=e}},sin:function(t){return 0>(t=Math.round(t)%360)&&(t+=360),this.sins[t]},cos:function(t){return 0>(t=(0|t)%360)&&(t+=360),this.coss[t]},rotateByAngle:function(t,e,s){var i=t.x-e.x;return t=t.y-e.y,e=this.cos(s),s=this.sin(s),cc.v2(i*e-t*s,i*s+t*e)},getIntersectPoint:function(t,e,s,i,r){if(!(t&&e&&s&&i)||t.x==e.x&&t.y==e.y||s.x==i.x&&s.y==i.y)return!1;var n=(i.y-s.y)*(e.x-t.x)-(i.x-s.x)*(e.y-t.y);return 0!=n&&(i=((t.y-s.y)*(i.x-s.x)-(t.x-s.x)*(i.y-s.y))/n,s=((t.y-s.y)*(e.x-t.x)-(t.x-s.x)*(e.y-t.y))/n,!(0>i||1<i||0>s||1<s)&&(r&&(r.x=t.x+i*(e.x-t.x),r.y=t.y+i*(e.y-t.y)),!0))},getIntersectPointCircle:function(t,e,s,i,r,n){return!!s&&(r=cc.v2(s.y*r,-s.x*r),s=bycc.pAdd(i,r),i=bycc.pSub(i,r),r={},!!this.getIntersectPoint(t,e,s,i,r)&&(n&&bycc.pIn(n,r),!0))},getCollisionEdgePos:function(t,e){var s=bycc.pClamp(t,this.minPos,this.maxPos),i=bycc.pAdd(t,bycc.pMult(e,4e6)),r=bycc.p(0,0);return this.getIntersectPoint(s,i,this.cornerPos[0],this.cornerPos[1],r)||this.getIntersectPoint(s,i,this.cornerPos[2],this.cornerPos[3],r)||this.getIntersectPoint(s,i,this.cornerPos[0],this.cornerPos[3],r)||this.getIntersectPoint(s,i,this.cornerPos[1],this.cornerPos[2],r),bycc.pClamp(r,this.minPos,this.maxPos)},getCubicBezierVertices:function(t,e,s,i,r){for(var n=[],c=0,o=0;o<r;o++){var a=Math.pow(1-c,3)*t.x+3*Math.pow(1-c,2)*c*e.x+3*(1-c)*c*c*s.x+c*c*c*i.x,h=Math.pow(1-c,3)*t.y+3*Math.pow(1-c,2)*c*e.y+3*(1-c)*c*c*s.y+c*c*c*i.y;n.push(cc.v2(a,h)),c+=1/r}return n.push(cc.v2(i.x,i.y)),n}}),fish.pathUtils=new fish.PathUtils,fish.pathUtilsInternal=new fish.PathUtilsInternal,cc._RF.pop()},{}],Fish:[function(t,e,s){"use strict";cc._RF.push(e,"77ba2q80AVLlZ0I23eJXVIR","Fish"),cc.Class({extends:cc.Component,onLoad:function(){},start:function(){},onDestroy:function(){},isCanRoate:function(t){return!0},initFish:function(t){var e=t;return this.fishPathIndex=e.Path,this.enterTime=e.enterTime,!!this.setFishPath(this.fishPathIndex.toString())},setFishPath:function(t){return this.pathInfo=BYResource.FishPathsInfo[t],void 0!=this.pathInfo&&null!=this.pathInfo&&(this.path=this.pathInfo.path,this.times=this.pathInfo.times,this.angles=this.pathInfo.angles,this.xTail=this.xHead=0,this.startMove(),!0)},moveFinish:function(){this.callback&&this.unschedule(this.callback),this.node.destroy()},startMove:function(){this.nextIndex=1,this.callback=function(t){this.updateMove(t)},this.schedule(this.callback,.001)},updateMove:function(t){for(var e=.001*cc.sys.now()-this.enterTime,s=this.nextIndex,i=this.times.length,r=0;s<i&&this.times[s]<=e;)++s;if(this.nextIndex=s,s>=i)return cc.log("\u8fd0\u884c\u7ed3\u675f"),void this.moveFinish();e=(e-this.times[s-1])/(this.times[s]-this.times[s-1]),i=bycc.pLerp(this.path[s-1],this.path[s],e),this.node.position=i,180<(r=this.angles[s]-this.angles[s-1])&&(r-=360),-180>r&&(r+=360),this.node.rotation=this.angles[s-1]+r*e}}),cc._RF.pop()},{}],Item:[function(t,e,s){"use strict";cc._RF.push(e,"84fa0g/UZ9PNq3Olqueyk8U","Item"),cc.Class({extends:cc.Component,properties:{checkBox:{default:null,type:cc.Toggle},label:{default:null,type:cc.Label}},onLoad:function(){this.checkBox.node.on("toggle",this.checkedCallback,this)},start:function(){},onDestroy:function(){this.unRegisteGameHandler()},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={CHECK_OCCUR:"ckeck_occur"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){var i=t;switch(e){case i.CMD_UI.CHECK_OCCUR:i.processUncheck(s)}},initUI:function(t){this.label.string=String(BYResource.PathsListTitles[t]),this.checkBox.node.keyNum=t,this.initCMD("ITEM_"+t)},checkedCallback:function(t){t.isChecked?(BYResource.FishPathsNum=t.node.keyNum,BYSYSMOD=BYResource.SYSMOD.EDITOLD,bycc.uiMsgMgr.dispatchMsg("ckeck_occur",t.node.keyNum)):BYResource.FishPathsNum==this.checkBox.node.keyNum&&(BYResource.FishPathsNum=null)},processUncheck:function(t){t!=this.checkBox.node.keyNum&&this.checkBox.uncheck()}}),cc._RF.pop()},{}],MenuBtn:[function(t,e,s){"use strict";cc._RF.push(e,"9dfd4447WRIl4+sitipQHOj","MenuBtn"),cc.Class({extends:cc.Component,properties:{startBtn:{default:null,type:cc.Button},replayBtn:{default:null,type:cc.Button},editButton:{default:null,type:cc.Button},saveButton:{default:null,type:cc.Button},exportButton:{default:null,type:cc.Button},exportAllButton:{default:null,type:cc.Button}},onLoad:function(){this.startBtn.interactable=!1,this.replayBtn.interactable=!1,this.savedPath=[]},start:function(){this.initCMD("MenuBtn"),BYSYSMOD=BYResource.SYSMOD.EDITING},onDestroy:function(){this.unRegisteGameHandler()},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={LIST_READY:"list_ready"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){switch(e){case t.CMD_UI.LIST_READY:this.readyBtns()}},readyBtns:function(){this.startBtn.interactable=!0,this.replayBtn.interactable=!0,this.editButton.interactable=!0,this.saveButton.interactable=!0,this.exportButton.interactable=!0,this.exportAllButton.interactable=!0},widgetClickCallback:function(t,e){switch(t.target.name){case"StartButton":bycc.uiMsgMgr.dispatchMsg("run_fish");break;case"ReplayButton":bycc.uiMsgMgr.dispatchMsg("replay_run_fish");break;case"EditButton":bycc.uiMsgMgr.dispatchMsg("edit_path");break;case"SaveButton":this.saveForLocal();break;case"ExportButton":this.saveForBrowser();break;case"ExportAllButton":this.saveAllForBrowser();break;case"CreateButton":this.createNewPath();break;case"DrawButton":this.drawNewPath()}},processSavedPath:function(t){var e=!1;for(var s in this.savedPath){if(this.savedPath.hasOwnProperty(s))t==this.savedPath[s]&&(e=!0)}e||this.savedPath.push(t)},saveForLocal:function(){if(BYResource.FishPathsNum){var t=BYResource.FishPathsNum,e=this.getPathInfoStr(t);cc.sys.localStorage.setItem(t,e),this.processSavedPath(t),alert("SAVE OK")}else alert("no selected")},saveForBrowser:function(){for(var t="",e=this.savedPath.length,s=0;s<e;s++){var i=this.savedPath[s];t+=cc.sys.localStorage.getItem(i)}bycc.downloadPathConfigs(t,"PathSaved_new")},saveAllForBrowser:function(){var t="";for(var e in BYResource.FishPaths)if(BYResource.FishPaths.hasOwnProperty(e)){var s,i="",r=e,n=!1;for(var c in this.savedPath){if(this.savedPath.hasOwnProperty(c))this.savedPath[c]==r&&(n=!0,s=c)}if(n){var o=this.savedPath[s];i=cc.sys.localStorage.getItem(o)}else i=this.getPathInfoStr(r);t+=i}bycc.downloadPathConfigs(t,"byhlj_path_new")},getPathInfoStr:function(t){var e=BYResource.PathsListTitles[t].split(" ").pop(),s=BYResource.FishPaths[t].points,i="|";for(var r in s)if(s.hasOwnProperty(r)){var n=s[r];i=i+n.x.toFixed(2)+","+n.y.toFixed(2)+";"}var c=BYResource.FishPaths[t].ctrls,o="|";for(var a in c)if(c.hasOwnProperty(a)){var h=c[a];o=o+h.x.toFixed(2)+","+h.y.toFixed(2)+","+h.z.toFixed(2)+","+h.w.toFixed(2)+";"}var u=BYResource.FishPaths[t].speeds,l=[];for(var p in u){if(u.hasOwnProperty(p))l=l+u[p].toFixed(2)+";"}return t+"|"+e+i+o+"|"+l+"\r\n"}}),cc._RF.pop()},{}],NewItem:[function(t,e,s){"use strict";cc._RF.push(e,"42c1cmiiXxPbrgOP3hhVUqi","NewItem"),cc.Class({extends:cc.Component,properties:{checkBox:{default:null,type:cc.Toggle},label:{default:null,type:cc.Label}},onLoad:function(){this.checkBox.isChecked=!0,this.checkBox.node.on("toggle",this.checkedCallback,this)},start:function(){},onDestroy:function(){this.unRegisteGameHandler()},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={CHANGE_PATH:"change_path",CHECK_OCCUR:"ckeck_occur"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){var i=t;switch(e){case i.CMD_UI.CHANGE_PATH:i.processUncheck(s);break;case i.CMD_UI.CHECK_OCCUR:i.checkBox.isChecked=!1}},initUI:function(t){this.label.string=t+") newPath"+t,this.checkBox.node.keyNum=t,this.initCMD("ITEM_"+t),bycc.uiMsgMgr.dispatchMsg("change_path",t)},checkedCallback:function(t){t.isChecked&&(BYResource.CreatingIDCurr=t.node.keyNum,bycc.uiMsgMgr.dispatchMsg("change_path",BYResource.CreatingIDCurr))},processUncheck:function(t){t!=this.checkBox.node.keyNum&&this.checkBox.uncheck()}}),cc._RF.pop()},{}],NewMenuBtn:[function(t,e,s){"use strict";cc._RF.push(e,"c101buyU/1He59I4wRGCI2d","NewMenuBtn"),cc.Class({extends:cc.Component,properties:{createButton:{default:null,type:cc.Button},deleteButton:{default:null,type:cc.Button},saveButton:{default:null,type:cc.Button},exportButton:{default:null,type:cc.Button},editingBtn:cc.Button,btnLabel:cc.Label},onLoad:function(){this.createButton.interactable=!0,this.deleteButton.interactable=!0,this.saveButton.interactable=!0,this.exportButton.interactable=!0},start:function(){this.initCMD("NewMenuBtn")},onDestroy:function(){this.unRegisteGameHandler()},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={CHANGE_PATH:"change_path",DELETE_PATH:"delete_path"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){switch(e){case t.CMD_UI.CHANGE_PATH:this.btnLabel.string="Edit"}},widgetClickCallback:function(t,e){switch(t.target.name){case"CreateButton":BYSYSMOD=BYResource.SYSMOD.CREATING,BYResource.CreatingID+=1,BYResource.CreatingIDCurr=BYResource.CreatingID,bycc.uiMsgMgr.dispatchMsg("create_path",BYResource.CreatingID),this.btnLabel.string="Edit";break;case"DeleteButton":BYSYSMOD=BYResource.SYSMOD.NOTHING,BYResource.CreatingIDCurr&&(bycc.uiMsgMgr.dispatchMsg("delete_path",BYResource.CreatingIDCurr),delete BYResource.NewPathsCri[BYResource.CreatingIDCurr],delete BYResource.NewPathsCtr[BYResource.CreatingIDCurr]),this.btnLabel.string="Edit";break;case"SaveButton":this.saveAllForLocal();break;case"ExportButton":this.saveAllForBrowser();break;case"EditButton":BYSYSMOD!=BYResource.SYSMOD.EDITING?(BYSYSMOD=BYResource.SYSMOD.EDITING,this.btnLabel.string="Editing"):BYSYSMOD==BYResource.SYSMOD.EDITING&&(BYSYSMOD=BYResource.SYSMOD.CREATING,this.btnLabel.string="Edit")}},saveAllForLocal:function(){var t=!1;for(var e in BYResource.NewPathsCri)if(BYResource.NewPathsCri.hasOwnProperty(e)){var s=e,i=this.getPathInfoStr(s);cc.sys.localStorage.setItem(s+") newPath"+s,i),t=!0}t&&alert("SAVE OK")},saveAllForBrowser:function(){var t="";for(var e in BYResource.NewPathsCri)if(BYResource.NewPathsCri.hasOwnProperty(e)){var s=e;t+=cc.sys.localStorage.getItem(s+") newPath"+s)}bycc.downloadPathConfigs(t,"path_new")},getPathInfoStr:function(t){var e="newPath"+t,s=BYResource.NewPathsCri[t],i="|";for(var r in s)if(s.hasOwnProperty(r)){var n=s[r];i=i+n.x.toFixed(2)+","+n.y.toFixed(2)+";"}var c=BYResource.NewPathsCtr[t],o="|"+s[0].x.toFixed(2)+","+s[0].y.toFixed(2)+",";for(var a in c)if(c.hasOwnProperty(a)){var h=c[a];o=o+h.x.toFixed(2)+","+h.y.toFixed(2),o+=0==a%2?";":","}o=o+s[s.length-1].x.toFixed(2)+","+s[s.length-1].y.toFixed(2)+";";var u=[40,40,40],l=[];for(var p in u){if(u.hasOwnProperty(p))l=l+u[p].toFixed(2)+";"}return t+"|"+e+i+o+"|"+l+"\r\n"}}),cc._RF.pop()},{}],NewPathList:[function(t,e,s){"use strict";cc._RF.push(e,"5e6dajnLgJExaKXjFVMMhFd","NewPathList"),cc.Class({extends:cc.Component,properties:{listView:{default:null,type:cc.ScrollView},conctentView:{default:null,type:cc.Node},listItem:{default:null,type:cc.Prefab}},onLoad:function(){this.initCMD("NewPathList")},start:function(){},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={CREATE_PATH:"create_path",DELETE_PATH:"delete_path",CLONE_PATH:"clone_path"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){var i=t;switch(e){case i.CMD_UI.CREATE_PATH:this.addOnePath(s);break;case i.CMD_UI.DELETE_PATH:this.deleteOnePath(s);break;case i.CMD_UI.CLONE_PATH:this.cloneOnePath()}},addOnePath:function(t){BYResource.NewPathsCri[t]||this.addNewItem(t)},addNewItem:function(t){var e=cc.instantiate(this.listItem);e.getComponent("NewItem").initUI(t),e.parent=this.conctentView},deleteOnePath:function(t){this.deleteOneItem(t)},deleteOneItem:function(t){var e=this.conctentView.children;for(var s in e)if(e.hasOwnProperty(s)){var i=e[s];i.getComponent("NewItem")&&i.getComponent("NewItem").label.string==t+") newPath"+t&&i.destroy()}},cloneOnePath:function(){this.addNewItem(BYResource.CreatingIDCurr)}}),cc._RF.pop()},{}],PathCreate:[function(t,e,s){"use strict";cc._RF.push(e,"d0900sWtclDTZx26llgNLmt","PathCreate"),cc.Class({extends:cc.Component,properties:{sceneNode:{default:null,type:cc.Node},ctrNode:{default:null,type:cc.Prefab},graphics:{default:null,type:cc.Graphics}},onLoad:function(){this.criList=[],this.ctrList=[],this.created=!1},start:function(){this.initCMD("PathCreate")},ondestroy:function(){this.node.off(cc.Node.EventType.TOUCH_END,this.creatPath,this)},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={CREATE_PATH:"create_path",DELETE_PATH:"delete_path",UPDATE_PATH:"updete_path",CHANGE_PATH:"change_path",CHECK_OCCUR:"ckeck_occur",MOVE_PATH:"move_path",CLONE_PATH:"clone_path"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){var i=t;switch(e){case i.CMD_UI.CREATE_PATH:this.creatOnePath();break;case i.CMD_UI.DELETE_PATH:this.deleteOnePath(s);break;case i.CMD_UI.UPDATE_PATH:this.refreshPath(!0);break;case i.CMD_UI.CHANGE_PATH:BYSYSMOD=BYResource.SYSMOD.CREATING,this.refreshPath(!1);break;case i.CMD_UI.CHECK_OCCUR:this.node.off(cc.Node.EventType.TOUCH_END,this.creatPath,this);break;case i.CMD_UI.MOVE_PATH:this.creatNewPath(s);break;case i.CMD_UI.CLONE_PATH:this.creatClonePath()}},deleteOnePath:function(t){this.criList=[],this.ctrList=[],this.created=!1,this.node.off(cc.Node.EventType.TOUCH_END,this.creatPath,this)},creatOnePath:function(){this.criList=[],this.ctrList=[],this.created=!1,this.node.on(cc.Node.EventType.TOUCH_END,this.creatPath,this)},creatPath:function(t){if(BYSYSMOD==BYResource.SYSMOD.CREATING){var e=t.getTouches(),s=(e[0].getLocation(),this.sceneNode.convertTouchToNodeSpaceAR(e[0]));this.criList.push(s);var i=cc.instantiate(this.ctrNode);i.position=s,i.nodeTpye=1,this.created?i.color=cc.Color.BLACK:i.color=cc.Color.GREEN,i.parent=this.sceneNode,this.created=!0;var r=this.criList.length;2==r?this.drallLine():r>2&&this.addCtrAndDrallBezier()}},drallLine:function(){this.ctrList=[];var t=this.ctrList,e=cc.v2((this.criList[0].x+.25*this.criList[1].x)/1.25,(this.criList[0].y+.25*this.criList[1].y)/1.25),s=cc.v2((this.criList[1].x+.25*this.criList[0].x)/1.25,(this.criList[1].y+.25*this.criList[0].y)/1.25);for(var i in t.push(e),t.push(s),t)if(t.hasOwnProperty(i)){var r=cc.instantiate(this.ctrNode);r.position=t[i],r.nodeTpye=0,r.parent=this.sceneNode}var n=[];for(var c in t)if(t.hasOwnProperty(c)){var o=t[c];n.push(o)}BYResource.NewPathsCtr[BYResource.CreatingIDCurr]=n;var a=[];for(var h in this.criList)if(this.criList.hasOwnProperty(h)){var u=this.criList[h];a.push(u)}BYResource.NewPathsCri[BYResource.CreatingIDCurr]=a;var l=this.graphics;l.clear(),l.strokeColor=cc.Color.GREEN,l.moveTo(this.criList[0].x,this.criList[0].y),l.bezierCurveTo(t[0].x,t[0].y,t[1].x,t[1].y,this.criList[1].x,this.criList[1].y),l.stroke()},addCtrAndDrallBezier:function(){this.clearCtr(),this.ctrList=[];for(var t=this.ctrList,e=this.criList.length,s=0;s<e;s++){var i=s-1<0?e-1:s-1,r=s+1>e-1?0:s+1,n=this.criList[s],c=this.criList[r],o=this.criList[i],a=cc.v2((o.x+n.x)/2,(o.y+n.y)/2),h=cc.v2((c.x+n.x)/2,(c.y+n.y)/2),u=o.sub(n).mag()/n.sub(c).mag(),l=cc.v2((a.x+u*h.x)/(u+1),(a.y+u*h.y)/(u+1)),p=n.sub(l),f=a.add(p),d=h.add(p);0==s?t.push(d):s==e-1?t.push(f):(t.push(f),t.push(d))}for(var g in t)if(t.hasOwnProperty(g)){var C=cc.instantiate(this.ctrNode);C.position=t[g],C.nodeTpye=0,C.parent=this.sceneNode}var y=[];for(var v in t)if(t.hasOwnProperty(v)){var P=t[v];y.push(P)}BYResource.NewPathsCtr[BYResource.CreatingIDCurr]=y;var R=[];for(var _ in this.criList)if(this.criList.hasOwnProperty(_)){var I=this.criList[_];R.push(I)}BYResource.NewPathsCri[BYResource.CreatingIDCurr]=R;var m=this.graphics;m.clear(),m.strokeColor=cc.Color.GREEN;for(var M=0;M<e-1;M++){m.moveTo(this.criList[M].x,this.criList[M].y);r=2*M;m.bezierCurveTo(t[r].x,t[r].y,t[r+1].x,t[r+1].y,this.criList[M+1].x,this.criList[M+1].y),m.stroke()}},clearCtr:function(){var t=this.sceneNode.children;for(var e in t)if(t.hasOwnProperty(e)){var s=t[e];0==s.nodeTpye&&s.destroy()}},refreshPath:function(t){if(this.criList=BYResource.NewPathsCri[BYResource.CreatingIDCurr],this.ctrList=BYResource.NewPathsCtr[BYResource.CreatingIDCurr],this.criList){var e=this.ctrList,s=this.criList.length,i=this.graphics;i.clear(),i.strokeColor=cc.Color.GREEN;for(var r=0;r<s-1;r++){i.moveTo(this.criList[r].x,this.criList[r].y);var n=2*r;i.bezierCurveTo(e[n].x,e[n].y,e[n+1].x,e[n+1].y,this.criList[r+1].x,this.criList[r+1].y),i.stroke()}t||(this.clearScreen(),this.addCriNode(this.criList),this.addCtrNode(e))}else this.clearScreen(),this.graphics.clear(),this.creatOnePath()},clearScreen:function(){var t=this.sceneNode.children;for(var e in t)if(t.hasOwnProperty(e)){var s=t[e];"Layout"!=s.name&&"GraphicsNode"!=s.name&&s.destroy()}},addCriNode:function(t){for(var e in t)if(t.hasOwnProperty(e)){var s=cc.instantiate(this.ctrNode);s.color="0"!=e?cc.Color.BLACK:cc.Color.GREEN,s.position=t[e],s.nodeTpye=1,s.parent=this.sceneNode}},addCtrNode:function(t){for(var e in t)if(t.hasOwnProperty(e)){var s=cc.instantiate(this.ctrNode);s.position=t[e],s.nodeTpye=0,s.parent=this.sceneNode}},creatNewPath:function(t){this.clearScreen();var e=t.atPosList,s=t.ctrPosList;if(this.addCriNode(e),this.addCtrNode(s),e){var i=s,r=e.length,n=this.graphics;n.clear(),n.strokeColor=cc.Color.GREEN;for(var c=0;c<r-1;c++){n.moveTo(e[c].x,e[c].y);var o=2*c;n.bezierCurveTo(i[o].x,i[o].y,i[o+1].x,i[o+1].y,e[c+1].x,e[c+1].y),n.stroke()}}},creatClonePath:function(){this.clearScreen();var t=BYResource.NewPathsCri[BYResource.CreatingIDCurr],e=BYResource.NewPathsCtr[BYResource.CreatingIDCurr];if(this.addCriNode(t),this.addCtrNode(e),t){var s=e,i=t.length,r=this.graphics;r.clear(),r.strokeColor=cc.Color.GREEN;for(var n=0;n<i-1;n++){r.moveTo(t[n].x,t[n].y);var c=2*n;r.bezierCurveTo(s[c].x,s[c].y,s[c+1].x,s[c+1].y,t[n+1].x,t[n+1].y),r.stroke()}}}}),cc._RF.pop()},{}],PathList:[function(t,e,s){"use strict";cc._RF.push(e,"ed12e+ChatGZ6VqattDdGHB","PathList"),cc.Class({extends:cc.Component,properties:{listView:{default:null,type:cc.ScrollView},conctentView:{default:null,type:cc.Node},listItem:{default:null,type:cc.Prefab}},onLoad:function(){this.initCMD("PathList")},start:function(){},onDestroy:function(){this.unRegisteGameHandler()},refreshList:function(){for(var t in BYResource.FishPaths)if(BYResource.FishPaths.hasOwnProperty(t)){var e=cc.instantiate(this.listItem);e.getComponent("Item").initUI(t),e.parent=this.conctentView}bycc.uiMsgMgr.dispatchMsg("list_ready")},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={CACH_PATH_FINISH:"cach_path_finish",CHANGE_PATH:"change_path"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){var i=t;switch(e){case i.CMD_UI.CACH_PATH_FINISH:this.refreshList();break;case i.CMD_UI.CHANGE_PATH:BYResource.FishPathsNum=null;var r=this.conctentView.children;for(var n in r){if(r.hasOwnProperty(n))r[n].getComponent("Item").checkBox.uncheck()}}}}),cc._RF.pop()},{}],PathShow:[function(t,e,s){"use strict";cc._RF.push(e,"781478WofFFra4bSSw6Cycy","PathShow"),cc.Class({extends:cc.Component,properties:{fishPrefab:{default:null,type:cc.Prefab},graphics:{default:null,type:cc.Graphics},ctrNode:{default:null,type:cc.Prefab}},start:function(){this.initCMD("PathShow")},onDestroy:function(){this.unRegisteGameHandler()},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={CHECK_OCCUR:"ckeck_occur",TRIM_PATH:"trim_path",RUN_FISH:"run_fish",REPLAY_RUN_FISH:"replay_run_fish",EDIT_PATH:"edit_path",CREATE_PATH:"create_path",DELETE_PATH:"delete_path"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){var i=t;switch(e){case i.CMD_UI.CHECK_OCCUR:this.showUI(s);break;case i.CMD_UI.TRIM_PATH:this.trimPath(s);break;case i.CMD_UI.RUN_FISH:BYResource.FishPathsNum&&this.createOneFish();break;case i.CMD_UI.REPLAY_RUN_FISH:BYResource.FishPathsNum&&this.rePlayRunFish();break;case i.CMD_UI.EDIT_PATH:this.dismissFsih();break;case i.CMD_UI.CREATE_PATH:case i.CMD_UI.DELETE_PATH:this.clearScreen()}},trimPath:function(t){this.dismissFsih(),this.showPathPos()},showUI:function(t){this.pathKey=t,this.dismissFsih(),this.showPathPos(),this.showCtrPos()},showPathPos:function(){if(this.graphics.clear(),this.pathInfo=BYResource.FishPathsInfo[this.pathKey],void 0==this.pathInfo||null==this.pathInfo)return!1;for(var t in this.path=this.pathInfo.path,this.path)if(this.path.hasOwnProperty(t)){var e=this.path[t],s=this.graphics;s.strokeColor=cc.Color.BLUE,s.fillColor=cc.Color.BLUE,s.circle(e.x,e.y,5),s.stroke(),s.fill()}this.showPath()},showPath:function(t){t&&this.graphics.clear();for(var e=BYResource.PathsMainSpot[this.pathKey],s=BYResource.PathsCtrSpot[this.pathKey],i=0;i<e.length-1;i++){var r=this.graphics;r.strokeColor=cc.Color.GREEN,r.moveTo(e[i].x,e[i].y),r.bezierCurveTo(s[2*i].x,s[2*i].y,s[2*i+1].x,s[2*i+1].y,e[i+1].x,e[i+1].y),r.stroke()}},showCtrPos:function(){this.dismissCtr();var t=BYResource.PathsCtrSpot[this.pathKey];for(var e in t)if(t.hasOwnProperty(e)){var s=t[e],i=cc.instantiate(this.ctrNode);i.position=cc.v2(s.x,s.y),i.pathKey=this.pathKey,i.nodeTpye=0,i.parent=this.node}var r=BYResource.PathsMainSpot[this.pathKey];for(var n in r)if(r.hasOwnProperty(n)){var c=r[n],o=cc.instantiate(this.ctrNode);o.color=cc.Color.BLACK,o.position=cc.v2(c.x,c.y),o.pathKey=this.pathKey,o.nodeTpye=1,o.parent=this.node}},dismissCtr:function(){var t=this.node.children;for(var e in t)if(t.hasOwnProperty(e)){var s=t[e];"ctrNode"==s.name&&s.destroy()}},dismissFsih:function(){var t=this.node.children;for(var e in t)if(t.hasOwnProperty(e)){var s=t[e];"FishSprite"==s.name&&s.destroy()}},clearScreen:function(){this.graphics.clear();var t=this.node.children;for(var e in t)if(t.hasOwnProperty(e)){var s=t[e];"Layout"!=s.name&&"GraphicsNode"!=s.name&&s.destroy()}},rePlayRunFish:function(){this.dismissFsih(),this.createOneFish()},createOneFish:function(){var t=cc.instantiate(this.fishPrefab);t.position=cc.v2(-500,-200),t.parent=this.node;var e={ID:1,KindID:327,Path:BYResource.FishPathsNum,enterTime:.001*cc.sys.now(),exitTime:.001*cc.sys.now()+20};t.getComponent("Fish").initFish(e)}}),cc._RF.pop()},{}],PreviewPoolScript:[function(t,e,s){"use strict";cc._RF.push(e,"feee2MdMpBNuJlSj+qUL41r","PreviewPoolScript"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.waveQueue=[],this.timeNote=0},start:function(){BYResource.PAUSED=!1,this.initCMD("PreviewPoolScript")},update:function(t){if(this.timeNote+=t,this.waveQueue.length>0)for(var e=this.timeNote,s=0;this.waveQueue.length>0;s++){var i=this.waveQueue[0];if(Number(i[1])>e)break;this.fishEnter(i),this.waveQueue.shift()}},fishEnter:function(t){var e=t[0],s=BYResource.ConfigMaps.fish.config[e];s.KindID=e,s.Path=t[3],bycc.uiMsgMgr.dispatchMsg("generate_fish",s)},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={RES_READY:"res_ready"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){var i=t;switch(e){case i.CMD_UI.RES_READY:i.fishPoolStart()}},fishPoolStart:function(t){var e={"Group-20190222101452":["1104|0|48|4","1106|0|41|6","1108|0|52|8"]};for(var s in e)if(e.hasOwnProperty(s))for(var i in e[s])if(e[s].hasOwnProperty(i)){var r=e[s][i];this.waveQueue.push(r.split("|"))}}}),cc._RF.pop()},{}],Resource:[function(t,e,s){"use strict";cc._RF.push(e,"afd28S3wsZGfb5gRGAdFDgf","Resource"),BYResource.SYSMOD=new cc.Enum({NOTHING:0,CREATING:1,EDITING:2,EDITOLD:3,MOVING:4}),BYResource.ConfigPath="configs/",BYResource.ConfigMaps={},BYResource.FishPathsConfigName="byhlj_path",BYResource.FishPaths={},BYResource.FishPathsInfo={},BYResource.PathsListTitles={},BYResource.PathsMainSpot={},BYResource.PathsCtrSpot={},BYResource.FishPathsNum=null,BYResource.NewPathsCri={},BYResource.NewPathsCtr={},BYResource.CreatingID=0,BYResource.CreatingIDCurr=0,BYResource.FishResPath="Images/Fish",BYResource.FishSpriteMap={},BYResource.FishAnimConfigName="fishanim",BYResource.FishAnimClip={},BYResource.FishSelected=[],BYResource.PAUSED=!0,BYResource.TRACKSDATA={},BYResource.TRACKFISHTNOTE={},BYResource.FISHSPOOLSIZE=0,BYResource.TRACKSGROUP=null,BYResource.SCENESTARTNOTE=null,BYResource.FISHSTARTNOTE=null,cc._RF.pop()},{}],SceneTitleScript:[function(t,e,s){"use strict";cc._RF.push(e,"cdafbzog/RB2LCJKpGaJAkP","SceneTitleScript"),cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,changeBtn:cc.Button},start:function(){switch(this.nameLabel.string){case"Path":cc.director.preloadScene("FishScene");break;case"FishPool":cc.director.preloadScene("PreviewScene")}},changeScene:function(t,e){switch(this.nameLabel.string){case"Path":bycc.log(" now is BezierScene , next is FishScene"),BYResource.EditingPath||cc.director.loadScene("FishScene");break;case"FishPool":bycc.log(" now is FishScene , next is PreviewScene "),cc.director.loadScene("PreviewScene")}}}),cc._RF.pop()},{}],SplashScene:[function(t,e,s){"use strict";cc._RF.push(e,"27517Eb2YlPaKlDpdcPx0Y5","SplashScene"),cc.Class({extends:cc.Component,properties:{listNode:{default:null,type:cc.Node},sceneNode:{default:null,type:cc.Node}},onLoad:function(){this.offSetVector=cc.v2(99,55)},start:function(){this.startLoadingRes_Configs()},onDestroy:function(){},loadingResErrorCallback:function(t,e,s){cc.log("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),cc.log(t),cc.log(e),cc.log(s)},loadingResSuccess:function(){},startLoadingRes_Configs:function(){var t=this;cc.loader.loadResDir(BYResource.ConfigPath,function(e,s,i){if(e)t.loadingResErrorCallback(e,s,i);else for(var r=0;r<s.length;r++){var n=s[r];n instanceof cc.JsonAsset&&(BYResource.ConfigMaps[n.name]=n.json),n.name==BYResource.FishPathsConfigName&&t.loadPathContentCallback(n.text)}})},loadPathContentCallback:function(t){for(var e=t.replace(/\r/g,"").split("\n").filter(function(t){return!!t}),s=0,i=e.length;s<i;s++){var r=e[s].split("|"),n=parseInt(r[0])+") "+r[1];if(BYResource.PathsListTitles[parseInt(r[0])]=n,r.length>=5){var c={};c.pathId=parseInt(r[0]),c.points=fish.pathUtils.str2Vec2Array(r[2]),c.ctrls=fish.pathUtils.str2Vec4Array(r[3]),c.speeds=fish.pathUtils.str2FloatArray(r[4]),BYResource.FishPaths[c.pathId.toString()]=c}}this.cacheAllPathDetailInfo()},cacheAllPathDetailInfo:function(){for(var t in BYResource.FishPaths)BYResource.FishPaths.hasOwnProperty(t)&&(BYResource.FishPathsInfo[t]=this.setFishPath(t));bycc.uiMsgMgr.dispatchMsg("cach_path_finish")},setFishPath:function(t){var e=t,s={},i=[],r=[],n=[],c=BYResource.FishPaths[t];if(void 0==c||null==c)return!1;t=c.points;var o=c.ctrls;c=c.speeds;var a=[];for(var h in t)if(t.hasOwnProperty(h)){var u=t[h];u.x+=this.offSetVector.x,u.y+=this.offSetVector.y,a.push(cc.v2(u.x,u.y))}BYResource.PathsMainSpot[e]=a;var l=[];for(var p in o)if(o.hasOwnProperty(p)){var f=o[p];f.x+=this.offSetVector.x,f.y+=this.offSetVector.y,f.z+=this.offSetVector.x,f.w+=this.offSetVector.y,l.push(cc.v2(f.x,f.y)),l.push(cc.v2(f.z,f.w))}l.shift(),l.pop(),BYResource.PathsCtrSpot[e]=l,i.push(t[0]),r.push(0);for(var d=0,g=0,C=t.length-1;g<C;g++){for(var y=cc.v2(o[g].z,o[g].w),v=cc.v2(o[g+1].x,o[g+1].y),P=(y=fish.pathUtilsInternal.getCubicBezierVertices(t[g],y,v,t[g+1],10),v=1,y.length);v<P;v++)i.push(y[v]);v=c[g],P=0;for(var R=y.length-1;P<R;P++){var _=fish.pathUtils.v2p(y[P]),I=fish.pathUtils.v2p(y[P+1]);d=d+bycc.pDistance(_,I)/v;r.push(d),_=bycc.pSub(I,_),_=fish.pathUtils.getAngle(_,cc.v2(-1,0)),n.push(_)}}return n.push(n[n.length-1]),s.path=i,s.times=r,s.angles=n,s}}),cc._RF.pop()},{}],TransformPath:[function(t,e,s){"use strict";cc._RF.push(e,"6587bnhyJ5ES5O7cn+h74kZ","TransformPath"),cc.Class({extends:cc.Component,properties:{rotationEdit:cc.EditBox,xEdit:cc.EditBox,yEdit:cc.EditBox,sceneNoe:cc.Node,bgNode:cc.Node},onLoad:function(){this.rotationEdit.node.on("text-changed",this.editCallback,this),this.xEdit.node.on("text-changed",this.editCallback,this),this.yEdit.node.on("text-changed",this.editCallback,this),this.moveX=0,this.moveY=0},start:function(){},clickCallback:function(){var t=[],e=[],s=BYResource.NewPathsCri[BYResource.CreatingIDCurr],i=BYResource.NewPathsCtr[BYResource.CreatingIDCurr];if(s){for(var r=0;r<s.length;r++)t.push(s[r]);for(var n=0;n<i.length;n++)e.push(i[n]);BYResource.CreatingID+=1,BYResource.CreatingIDCurr=BYResource.CreatingID,BYResource.NewPathsCri[BYResource.CreatingID]=t,BYResource.NewPathsCtr[BYResource.CreatingID]=e,bycc.uiMsgMgr.dispatchMsg("clone_path")}},editCallback:function(t){var e=t.node.name,s=Number(t.string);switch(e){case"RotationEditBox":this.rotationPath(s);break;case"XEditBox":this.moveX=s,this.movePath();break;case"YEditBox":this.moveY=s,this.movePath()}},rotationPath:function(t){for(var e={},s=[],i=[],r=BYResource.NewPathsCri[BYResource.CreatingIDCurr],n=BYResource.NewPathsCtr[BYResource.CreatingIDCurr],c=0;c<r.length;c++)s.push(r[c]);for(var o=0;o<n.length;o++)i.push(n[o]);var a=t/180*Math.PI;this.rotationPos(r,a),this.rotationPos(n,a),e.atPosList=r,e.ctrPosList=n,bycc.uiMsgMgr.dispatchMsg("move_path",e)},rotationPos:function(t,e){for(var s in t)if(t.hasOwnProperty(s)){var i=t[s],r=this.bgNode.convertToNodeSpaceAR(this.sceneNoe.convertToWorldSpaceAR(i));r.rotateSelf(e);var n=this.sceneNoe.convertToNodeSpaceAR(this.bgNode.convertToWorldSpaceAR(r));t[s]=n}},movePath:function(){for(var t={},e=[],s=[],i=BYResource.NewPathsCri[BYResource.CreatingIDCurr],r=BYResource.NewPathsCtr[BYResource.CreatingIDCurr],n=0;n<i.length;n++)e.push(i[n]);for(var c=0;c<r.length;c++)s.push(r[c]);this.movePos(i),this.movePos(r),t.atPosList=i,t.ctrPosList=r,bycc.uiMsgMgr.dispatchMsg("move_path",t)},movePos:function(t){for(var e in t)if(t.hasOwnProperty(e)){var s=t[e];t[e]=cc.v2(s.x,s.y).add(cc.v2(this.moveX,this.moveY))}}}),cc._RF.pop()},{}],UIMsgMgr:[function(t,e,s){"use strict";cc._RF.push(e,"2fc092vozpEup7t5jURj3Fa","UIMsgMgr"),cc.Class({ctor:function(){this.listeners_={},this.tagGroupListeners_={},this.isPrintLog},addCmdListener:function(t,e,s){if(null==this.listeners_[t]&&(this.listeners_[t]={}),null==this.tagGroupListeners_[s]&&(this.tagGroupListeners_[s]=[]),null==e.onUIMessageEvent)return console.log("--ERROR-- addCmdListener UI\u6dfb\u52a0\u4e8b\u4ef6\u5931\u8d25 ... onUIMessageEvent not found"),!1;this.listeners_[t][s]=e,this.tagGroupListeners_[s].push(t)},removeCmdListenerByTagGroup:function(t){var e=this;if(null==this.tagGroupListeners_[t])return console.log("removeCmdListenerByTagGroup .. "+t+" .. not found"),!1;this.tagGroupListeners_[t].forEach(function(s,i){e.removeCmdListenerByNameAndGroup(s,t)}),delete this.tagGroupListeners_[t]},removeCmdListenerByNameAndGroup:function(t,e){if(null==this.listeners_[t])return!1;delete this.listeners_[t][e],this.isPrintLog&&console.log("UIMsgMgr removeCmdListenerByNameAndGroup "+e+"_"+t)},dispatchMsg:function(t,e){if(this.isPrintLog&&console.log("UIMsgMgr dispatchMsg "+t),null==this.listeners_[t])return console.log("UIMsgMgr listeners_eventName is null"),!1;for(var s in this.listeners_[t])if(this.listeners_[t].hasOwnProperty(s)){var i=this.listeners_[t][s];i.onUIMessageEvent(i,t,e)}}}),cc._RF.pop()},{}],UtilScript:[function(t,e,s){"use strict";function i(t){document.body.removeChild(t.target)}cc._RF.push(e,"3ae38kMVoNGE5WZY/Bozy62","UtilScript"),bycc.downloadPathConfigs=function(t,e){if(""!=t){if(cc.sys.isBrowser){var s=new Blob([t],{type:"text/plain"}),r=document.createElement("a");r.download=e,r.innerHTML="Download File",null!=window.webkitURL?r.href=window.webkitURL.createObjectURL(s):(r.href=window.URL.createObjectURL(s),r.onclick=i,r.style.display="none",document.body.appendChild(r)),r.click()}}else alert("no message")},cc._RF.pop()},{}],ctrSpot:[function(t,e,s){"use strict";cc._RF.push(e,"bba0bQF/dFDPK/pXN6EtRo9","ctrSpot"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.pathKey=this.node.pathKey,this.nodeTpye=this.node.nodeTpye,this.pos=this.node.position,this.listenserIsOn=!1},start:function(){this.openListenser(),this.initCMD(this.node.uuid)},onDestroy:function(){this.unRegisteGameHandler()},openListenser:function(){this.listenserIsOn||(this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.pathKey=this.node.pathKey,this.pos=this.node.position},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(BYSYSMOD==BYResource.SYSMOD.EDITING||BYSYSMOD==BYResource.SYSMOD.EDITOLD){var e=t.touch.getDelta();this.node.x+=e.x,this.node.y+=e.y}},this),this.node.on(cc.Node.EventType.TOUCH_END,function(t){BYSYSMOD==BYResource.SYSMOD.EDITING?this.modifyPath():BYSYSMOD==BYResource.SYSMOD.EDITOLD&&this.repaintPath()},this),this.listenserIsOn=!0)},closeListenser:function(){this.listenserIsOn&&(this.node.targetOff(this),this.listenserIsOn=!1)},initCMD:function(t){this.EVET_TAG_GROUP=t,this.CMD_UI={RUN_FISH:"run_fish",REPLAY_RUN_FISH:"replay_run_fish",EDIT_PATH:"edit_path",UPDATE_PATH:"updete_path"},this.registerGameHandler()},registerGameHandler:function(){for(var t in this.CMD_UI)bycc.uiMsgMgr.addCmdListener(this.CMD_UI[t],this,this.EVET_TAG_GROUP)},unRegisteGameHandler:function(){bycc.uiMsgMgr.removeCmdListenerByTagGroup(this.EVET_TAG_GROUP)},onUIMessageEvent:function(t,e,s){var i=t;switch(e){case i.CMD_UI.RUN_FISH:case i.CMD_UI.REPLAY_RUN_FISH:this.closeListenser();break;case i.CMD_UI.EDIT_PATH:this.openListenser()}},repaintPath:function(){var t=BYResource.PathsMainSpot[this.pathKey],e=BYResource.PathsCtrSpot[this.pathKey];if(this.nodeTpye){for(var s in t)if(t.hasOwnProperty(s)){var i=t[s];cc.v2(i.x,i.y).equals(this.pos)&&(t[s]=this.node.position)}BYResource.PathsMainSpot[this.pathKey]=t}else{for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];cc.v2(n.x,n.y).equals(this.pos)&&(e[r]=this.node.position)}BYResource.PathsCtrSpot[this.pathKey]=e}var c=[t[0]].concat(e);c.push(t[t.length-1]);var o={};o.pathId=Number(this.pathKey),o.points=BYResource.PathsMainSpot[o.pathId];for(var a=[],h=0;h<c.length-1;h+=2){var u=c[h],l=c[h+1];a.push({x:u.x,y:u.y,z:l.x,w:l.y})}o.ctrls=a,o.speeds=BYResource.FishPaths[o.pathId].speeds,BYResource.FishPaths[o.pathId.toString()]=o,BYResource.FishPathsInfo[o.pathId.toString()]=this.setFishPath(o.pathId.toString()),bycc.uiMsgMgr.dispatchMsg("trim_path",this.pathKey)},setFishPath:function(t){var e=t,s={},i=[],r=[],n=[],c=BYResource.FishPaths[t];if(void 0==c||null==c)return!1;t=c.points;var o=c.ctrls;c=c.speeds;var a=[];for(var h in t)if(t.hasOwnProperty(h)){var u=t[h];a.push(cc.v2(u.x,u.y))}BYResource.PathsMainSpot[e]=a;var l=[];for(var p in o)if(o.hasOwnProperty(p)){var f=o[p];l.push(cc.v2(f.x,f.y)),l.push(cc.v2(f.z,f.w))}l.shift(),l.pop(),BYResource.PathsCtrSpot[e]=l,i.push(t[0]),r.push(0);for(var d=0,g=0,C=t.length-1;g<C;g++){for(var y=cc.v2(o[g].z,o[g].w),v=cc.v2(o[g+1].x,o[g+1].y),P=(y=fish.pathUtilsInternal.getCubicBezierVertices(t[g],y,v,t[g+1],10),v=1,y.length);v<P;v++)i.push(y[v]);v=c[g],P=0;for(var R=y.length-1;P<R;P++){var _=fish.pathUtils.v2p(y[P]),I=fish.pathUtils.v2p(y[P+1]);d=d+bycc.pDistance(_,I)/v;r.push(d),_=bycc.pSub(I,_),_=fish.pathUtils.getAngle(_,cc.v2(-1,0)),n.push(_)}}return n.push(n[n.length-1]),s.path=i,s.times=r,s.angles=n,s},modifyPath:function(){var t=BYResource.NewPathsCri[BYResource.CreatingIDCurr],e=BYResource.NewPathsCtr[BYResource.CreatingIDCurr];if(this.nodeTpye){for(var s in t)if(t.hasOwnProperty(s)){var i=t[s];cc.v2(i.x,i.y).equals(this.pos)&&(t[s]=this.node.position)}BYResource.NewPathsCri[BYResource.CreatingIDCurr]=t}else{for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];cc.v2(n.x,n.y).equals(this.pos)&&(e[r]=this.node.position)}BYResource.NewPathsCtr[BYResource.CreatingIDCurr]=e}bycc.uiMsgMgr.dispatchMsg("updete_path")}}),cc._RF.pop()},{}],fishSpript:[function(t,e,s){"use strict";cc._RF.push(e,"8d9ae5bvZxGeJwpotNeLsEK","fishSpript"),cc.Class({extends:cc.Component,properties:{fishSprite:cc.Sprite},onLoad:function(){},start:function(){},initFish:function(t){return this.fishKindId=Number(t.KindID),this.fishPathIndex=t.FISH_PATH,this.baseInfo=t,this.fishTrackPathType=this.baseInfo.TRACK_ALLOW_TYPE,this.fishScore=this.baseInfo.FISH_SCORE,this.fishNote={},this.fishNote.pathId=this.fishPathIndex,!!this.initFishNormal()&&(!!this.setFishPath(this.fishPathIndex.toString())&&(this.node.zIndex=this.fishScore,!0))},initFishNormal:function(){var t=this.baseInfo.FISH_RES,e=BYResource.FishSpriteMap[t];if(e){this.fishSprite.spriteFrame=e;var s=this.node.getComponent(cc.Animation),i="fish"+this.fishKindId;s.addClip(BYResource.FishAnimClip[i]),s.play(i),this.node.setScale(this.baseInfo.FISH_SCALE,this.baseInfo.FISH_SCALE)}return!0},setFishPath:function(t){if(this.pathInfo=BYResource.FishPathsInfo[t],void 0==this.pathInfo||null==this.pathInfo)return!1;this.path=[],this.angles=[];var e=this.pathInfo.path;this.times=this.pathInfo.times;var s=this.pathInfo.angles;return this.xTail=this.xHead=0,this.path=e,this.angles=s,this.node.position=this.path[0],this.startMove(),!0},moveFinish:function(){this.callback&&this.unschedule(this.callback),bycc.uiMsgMgr.dispatchMsg("clear_fish",this.node);var t=.001*cc.sys.now();this.fishNote.endT=t,BYResource.TRACKFISHTNOTE[this.fishKindId]=this.fishNote,bycc.log("\u8bb0\u5f55\u4e00\u6761\u9c7c\u7684\u6570\u636e"),bycc.log(BYResource.TRACKFISHTNOTE)},startMove:function(){this.nextIndex=1,this.timeLag=0,this.callback=function(t){this.updateMove(t)},this.schedule(this.callback,.001)},updateMove:function(t){if(!BYResource.PAUSED){var e=.001*cc.sys.now();BYResource.FISHSTARTNOTE||(BYResource.FISHSTARTNOTE=e,bycc.log(" \u8bb0\u5f55\u7b2c\u4e00\u6761\u9c7c\u6e38\u52a8\u5f00\u59cb "+e)),this.fishNote.startT||(this.fishNote.startT=e,bycc.log(" \u8bb0\u5f55\u6e38\u52a8\u5f00\u59cb "+e)),this.timeLag+=t;for(var s=this.timeLag,i=this.nextIndex,r=this.times.length,n=0;i<r&&this.times[i]<=s;)++i;if(this.nextIndex=i,i>=r)this.moveFinish();else{s=(s-this.times[i-1])/(this.times[i]-this.times[i-1]),r=bycc.pLerp(this.path[i-1],this.path[i],s),this.node.position=r,180<(n=this.angles[i]-this.angles[i-1])&&(n-=360),-180>n&&(n+=360);var c=this.angles[i-1]+n*s;c>-90&&c<90?(this.node.scaleX=1,this.node.rotation=c):(this.node.scaleX=-1,this.node.rotation=c+180)}}}}),cc._RF.pop()},{}]},{},["UIMsgMgr","FishItem","FishListScript","FishMenuScript","FishPoolScene","FishPrepareScript","fishSpript","NewItem","NewMenuBtn","NewPathList","PathCreate","TransformPath","Fish","Item","MenuBtn","PathList","PathShow","SplashScene","ctrSpot","PreviewPoolScript","SceneTitleScript","BYFrameApp","FishUtils","Resource","UtilScript"]);